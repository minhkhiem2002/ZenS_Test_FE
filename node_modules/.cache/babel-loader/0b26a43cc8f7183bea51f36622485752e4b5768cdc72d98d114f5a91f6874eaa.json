{"ast":null,"code":"import'./Content.scss';import React from'react';import{useState,useEffect}from'react';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Content=()=>{const[joke,setJoke]=useState('');const[err,setErr]=useState('');let hasReachedEnd=false;const getNextJoke=async()=>{if(hasReachedEnd){const dataSet={\"content\":\"That's all the jokes for today! Come back another day!\",\"id\":5,\"votes\":0,\"created_at\":\"2024-03-30T20:20:49.000Z\"};setJoke(dataSet);return;}const apiUrl=\"http://localhost:3001/next\";// const apiUrl = 'https://backend-ot8g.onrender.com/'\nconst lastJokeId=joke?joke.id:'null';console.log(lastJokeId);if(lastJokeId==5){console.log(\"Oke\");return;}try{const response=await axios.post(apiUrl,{lastJokeId});if(response){console.log(response);console.log('Type: ',typeof response.data.data);if(typeof response.data.data==='string'){console.log('end');hasReachedEnd=true;const dataSet={\"content\":\"That's all the jokes for today! Come back another day!\",\"id\":5,\"votes\":0,\"created_at\":\"2024-03-30T20:20:49.000Z\"};setJoke(dataSet);}else{setJoke(response.data.data);}}else{console.error('Error fetching next joke');}}catch(e){console.log(e);}};useEffect(()=>{getNextJoke();},[]);console.log('Joke',joke);return/*#__PURE__*/_jsxs(\"div\",{className:\"content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"pcontent\",children:joke&&/*#__PURE__*/_jsx(\"p\",{className:\"story\",children:joke.content})}),/*#__PURE__*/_jsx(\"hr\",{className:\"hr\",size:\"1px\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"button\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"fun-button\",onClick:getNextJoke,children:\"This is Funny!\"}),/*#__PURE__*/_jsx(\"button\",{className:\"no-button\",onClick:getNextJoke,children:\"This is not funny.\"})]})]});};export default Content;","map":{"version":3,"names":["React","useState","useEffect","axios","jsx","_jsx","jsxs","_jsxs","Content","joke","setJoke","err","setErr","hasReachedEnd","getNextJoke","dataSet","apiUrl","lastJokeId","id","console","log","response","post","data","error","e","className","children","content","size","onClick"],"sources":["D:/Test_Frontend/src/components/Content/Content.js"],"sourcesContent":["import './Content.scss'\r\nimport React from 'react'\r\nimport { useState, useEffect } from 'react'\r\nimport axios from 'axios'\r\nconst Content = () => {\r\n    const [joke,setJoke] = useState('')\r\n    const [err,setErr] = useState('')\r\n    let hasReachedEnd = false;\r\n    const getNextJoke = async () => {\r\n        if (hasReachedEnd) {\r\n            const dataSet = {\r\n                \"content\": \"That's all the jokes for today! Come back another day!\",\r\n                \"id\": 5,\r\n                \"votes\": 0,\r\n                \"created_at\": \"2024-03-30T20:20:49.000Z\"\r\n            }\r\n            setJoke(dataSet);\r\n            return;\r\n        }\r\n        const apiUrl = \"http://localhost:3001/next\";\r\n        // const apiUrl = 'https://backend-ot8g.onrender.com/'\r\n        const lastJokeId = joke ? joke.id : 'null'\r\n        console.log(lastJokeId)\r\n        if (lastJokeId == 5) {console.log(\"Oke\"); return;}\r\n        try {\r\n            const response = await axios.post(apiUrl, {lastJokeId});\r\n            if (response) {\r\n                console.log(response)\r\n                console.log('Type: ', typeof response.data.data)\r\n                if (typeof response.data.data === 'string') {\r\n                    console.log('end')\r\n                    hasReachedEnd = true;\r\n                    const dataSet = {\r\n                        \"content\": \"That's all the jokes for today! Come back another day!\",\r\n                        \"id\": 5,\r\n                        \"votes\": 0,\r\n                        \"created_at\": \"2024-03-30T20:20:49.000Z\"\r\n                    }\r\n                    setJoke(dataSet);\r\n                }\r\n                else {\r\n                setJoke(response.data.data);\r\n                }\r\n            }\r\n            else {\r\n                console.error('Error fetching next joke');\r\n            }\r\n        } catch (e) {\r\n            console.log(e);\r\n        }\r\n    }\r\n    useEffect(() => {\r\n        getNextJoke();\r\n    },[])\r\n    console.log('Joke', joke)\r\n    return (\r\n        <div className = \"content\">\r\n            <div className = \"pcontent\">\r\n            {joke && (  \r\n              <p className = \"story\">{joke.content}</p>\r\n                \r\n            )}\r\n             </div>\r\n            <hr className='hr' size = \"1px\"/>\r\n            <div className = \"button\">\r\n            <button className = \"fun-button\" onClick = {getNextJoke}>This is Funny!</button>\r\n            <button className = \"no-button\" onClick = {getNextJoke}>This is not funny.</button>\r\n             </div>\r\n            \r\n        </div>\r\n    )\r\n}\r\nexport default Content"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}